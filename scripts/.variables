#!/usr/bin/env bash
set -eu

VERSION=${VERSION:-""}
if [[ $VERSION == "production" ]]; then
  VERSION=$(cat ./VERSION 2>/dev/null)
else
  VERSION=$(cat ./VERSION 2>/dev/null)
  VERSION=$(printf %s-dev $VERSION)
fi

GITCOMMIT=${GITCOMMIT:-$(git rev-parse --short HEAD 2> /dev/null || true)}
BUILDTIME=${BUILDTIME:-$(TZ=GMT date +"%F %H:%M:%S+00:00" 2> /dev/null | sed -e 's/ /T/')}

# Default OS/ARCH
export GOOS="${GOOS:-$(go env GOHOSTOS)}"
export GOARCH="${GOARCH:-$(go env GOHOSTARCH)}"

SOURCE="./cmd/monitoror"
